\href{https://travis-ci.org/Erriez/ErriezCRC32}{\tt }

This is a target independent, flash size optimized C\+R\+C32 library for Arduino without C\+RC tables.



\subsection*{Library features}


\begin{DoxyItemize}
\item Compatible with standard C\+R\+C32 algorithms
\item Small flash footprint
\item No R\+AM buffer allocations
\item 32-\/bit table-\/less C\+R\+C32 calculation on\+:
\begin{DoxyItemize}
\item Arduino String object
\item Single null-\/terminated character array
\item Single buffer
\item Multiple null-\/terminated character arrays
\item Multiple buffers
\end{DoxyItemize}
\item No buffer alignment needed
\item Buffer input length in Bytes
\item Big and little endian input buffers
\item Arduino C library, compatible with C and C++ applications
\item C\+R\+C32 polynomial\+: 0x\+E\+D\+B88320
\end{DoxyItemize}

\subsection*{Hardware}

This library can be used on any 8 or 32-\/bit target and is optimized for small flash/\+R\+AM footprints without C\+RC table allocations in R\+AM.

\subsection*{Examples}

Arduino I\+DE $\vert$ Examples $\vert$ Erriez C\+R\+C32\+:


\begin{DoxyItemize}
\item \href{https://github.com/Erriez/ErriezCRC32/blob/master/examples/CRC32/CRC32.ino}{\tt C\+R\+C32}
\item tests $\vert$ \href{https://github.com/Erriez/ErriezCRC32/blob/master/tests/CRC32UnitTest/CRC32UnitTest.ino}{\tt C\+R\+C32\+Unit\+Test}
\end{DoxyItemize}

\subsection*{Benchmarks}

Arduino I\+DE $\vert$ Examples $\vert$ Erriez C\+R\+C32\+:


\begin{DoxyItemize}
\item tests $\vert$ \href{https://github.com/Erriez/ErriezCRC32/blob/master/tests/CRC32Benchmark/CRC32Benchmark.ino}{\tt C\+R\+C32\+Benchmark}
\end{DoxyItemize}

\paragraph*{Benchmark results on buffers}

The benchmark results below may be different for each target and run. Lower duration means faster C\+RC calculation.

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*6{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}{\bf Board }&\PBS\centering {\bf F\+\_\+\+C\+PU }&\PBS\centering {\bf 4 Bytes }&\PBS\centering {\bf 64 Bytes }&\PBS\centering {\bf 512 Bytes }&\PBS\centering {\bf 1024 Bytes  }\\\cline{1-6}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}{\bf Board }&\PBS\centering {\bf F\+\_\+\+C\+PU }&\PBS\centering {\bf 4 Bytes }&\PBS\centering {\bf 64 Bytes }&\PBS\centering {\bf 512 Bytes }&\PBS\centering {\bf 1024 Bytes  }\\\cline{1-6}
\endhead
Arduino U\+NO (A\+T\+Mega328) &\PBS\centering 16\+M\+Hz &\PBS\centering 80us &\PBS\centering 1172us &\PBS\centering 9000us &\PBS\centering 17112us \\\cline{1-6}
E\+S\+P8266 (We\+M\+OS D1 R2) &\PBS\centering 160\+M\+Hz &\PBS\centering 3us &\PBS\centering 35us &\PBS\centering 279us &\PBS\centering 557us \\\cline{1-6}
E\+S\+P32 (We\+M\+OS Lolin32) &\PBS\centering 80\+M\+Hz &\PBS\centering 2us &\PBS\centering 15us &\PBS\centering 111us &\PBS\centering 223us \\\cline{1-6}
D\+UE (S\+A\+M3\+X8E A\+RM Cortex-\/\+M3) &\PBS\centering 84\+M\+Hz &\PBS\centering 6us &\PBS\centering 70us &\PBS\centering 547us &\PBS\centering 1103us \\\cline{1-6}
\end{longtabu}
Benchmarks performed with the following versions\+:


\begin{DoxyItemize}
\item Arduino I\+DE v1.\+8.\+5
\item Arduino A\+VR Boards v1.\+6.\+21 (Arduino U\+NO)
\item \href{http://arduino.esp8266.com/stable/package_esp8266com_index.json}{\tt esp8266} v2.\+4.\+2
\item Arduino S\+AM Boards (32-\/bits A\+RM Cortex-\/\+M3) v1.\+6.\+11
\end{DoxyItemize}

\subsection*{Unit tests}

This library contains extensive unit tests on a various number of buffer types and lengths\+:


\begin{DoxyItemize}
\item tests $\vert$ \href{https://github.com/Erriez/ErriezCRC32/blob/master/examples/CRC32UnitTest/CRC32UnitTest.ino}{\tt C\+R\+C32\+Unit\+Test}
\end{DoxyItemize}

\subsection*{Library documentation}


\begin{DoxyItemize}
\item \href{https://erriez.github.io/ErriezCRC32}{\tt Doxygen online H\+T\+ML}
\item \href{https://github.com/Erriez/ErriezCRC32/raw/gh-pages/latex/ErriezCRC32.pdf}{\tt Doxygen P\+DF}
\end{DoxyItemize}

\subsection*{Usage}

{\bfseries Introduction}

The library consists of four C-\/functions for C\+RC calculation\+:


\begin{DoxyCode}
1 \{c++\}
2 // Calculate CRC32 on null-terminated character array (string)
3 uint32\_t crc32String(const char *buffer);
4 // Calculate CRC32 on one single buffer
5 uint32\_t crc32Buffer(const void *buffer, size\_t bufferLength);
6 
7 // Calculate CRC32 on multiple buffers
8 // First crc32Update() call should start with argument crc = CRC32\_INITIAL
9 // Next crc32Update() calls should set argument crc = previousCRC
10 uint32\_t crc32Update(const void *buffer, size\_t bufferLength, uint32\_t crc);
11 // Call crc32Update() at the end after the last crc32Update()
12 uint32\_t crc32Final(uint32\_t crc);
\end{DoxyCode}


{\bfseries Initialization}

Only an include file is required. No object allocation or library initialization required.


\begin{DoxyCode}
1 \{c++\}
2 #include <ErriezCRC32.h>
\end{DoxyCode}


{\bfseries Calculate C\+R\+C32 on Arduino String}


\begin{DoxyCode}
1 \{c++\}
2 String msg = "Hello world String!";
3 uint32\_t crc = crc32String(msg.c\_str());
\end{DoxyCode}


{\bfseries Calculate C\+R\+C32 on null-\/terminated character array}


\begin{DoxyCode}
1 \{c++\}
2 char msg[] = "Hello world char array!";
3 uint32\_t crc = crc32String(msg);
\end{DoxyCode}


{\bfseries Calculate C\+R\+C32 on single character buffer}


\begin{DoxyCode}
1 \{c++\}
2 char msg[] = "Hello world single buffer!";
3 uint32\_t crc = crc32Buffer(msg, strlen(msg));
\end{DoxyCode}


{\bfseries Calculate C\+R\+C32 on multiple characters}


\begin{DoxyCode}
1 \{c++\}
2 uint32\_t crc;
3 
4 crc = crc32Update("Hello ", 6, CRC32\_INITIAL);
5 crc = crc32Update("world ", 6, crc);
6 crc = crc32Update("multiple ", 9, crc);
7 crc = crc32Update("buffers!", 8, crc);
8 crc = crc32Final(crc);
\end{DoxyCode}


{\bfseries Calculate C\+R\+C32 on multiple buffers}


\begin{DoxyCode}
1 \{c++\}
2 const uint8\_t testBuffer1[3] = \{ 0xEB, 0xE5, 0x51 \};
3 const uint8\_t testBuffer2[5] = \{ 0x87, 0x7F, 0xB8, 0x18, 0x4E \};
4 uint32\_t crc;
5 
6 crc = crc32Update(testBuffer1, sizeof(testBuffer1), CRC32\_INITIAL);
7 crc = crc32Update(testBuffer2, sizeof(testBuffer2), crc);
8 crc = crc32Final(crc);
\end{DoxyCode}


{\bfseries Check C\+RC}


\begin{DoxyCode}
1 \{c++\}
2 void checkCRC(uint32\_t crcCalculated, uint32\_t crcExpected)
3 \{
4     printCRC(crcCalculated);
5     Serial.print(F("..."));
6 
7     if (crcCalculated == crcExpected) \{
8         Serial.println(F("OK"));
9     \} else \{
10         Serial.print(F("FAILED! Expected: "));
11         printCRC(crcExpected);
12         Serial.println(F(""));
13     \}
14 \}
\end{DoxyCode}


{\bfseries Print 32-\/bit C\+RC value}

Printing a {\ttfamily uint32\+\_\+t} value is not implemented on some targets which is a limitation of {\ttfamily Serial.\+print()} or {\ttfamily sprintf()}. This is a workaround to print a 32-\/bit hex value\+:


\begin{DoxyCode}
1 \{c++\}
2 void printCRC(uint32\_t crc)
3 \{
4     Serial.print("0x");
5     for (int8\_t i = 3; i >= 0; i--) \{
6         uint8\_t c = crc >> (i * 8);
7         if (c < 0x10) \{
8             Serial.print("0");
9         \}
10         Serial.print(c, HEX);
11     \}
12 \}
\end{DoxyCode}


{\bfseries C\+R\+C-\/calculation with Python}


\begin{DoxyCode}
1 >>> import binascii
2 >>> hex(binascii.crc32(b'Hello world String!') & 0xffffffff)
3 '0x55df869b'
\end{DoxyCode}


\subsection*{Library dependencies}


\begin{DoxyItemize}
\item C\+R\+C32\+Benchmark.\+ino\+: \href{https://github.com/Erriez/ErriezTimestamp.git}{\tt Erriez\+Timestamp.\+h}
\item C\+R\+C32\+Unit\+Test.\+ino\+: \href{https://github.com/mmurdoch/arduinounit}{\tt Arduino\+Unit.\+h}
\end{DoxyItemize}

\subsection*{Library installation}

Please refer to the \href{https://github.com/Erriez/ErriezArduinoLibrariesAndSketches/wiki}{\tt Wiki} page.

\subsection*{Other Arduino Libraries and Sketches from Erriez}


\begin{DoxyItemize}
\item \href{https://github.com/Erriez/ErriezArduinoLibrariesAndSketches}{\tt Erriez Libraries and Sketches} 
\end{DoxyItemize}